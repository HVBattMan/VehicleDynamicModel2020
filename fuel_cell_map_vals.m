% Lookup Table for Fuel Cell

function val = fuel_cell_map_vals(current_desired)
N=900; %Number of cells in fuel cell
M=2; % Molar mass of Hydrogen
excess_lambda = 1.2; % Excess Hydrogen ratio

V = [900, 842.690414515993, 806.420580084826, 784.432402993841, 768.291434042714, 755.354408376177, 744.443945340785,...
    734.931994240399, 726.443664778714, 718.737145027913, 711.647327501233, 705.056447748431, 698.877552854897, 693.044609818708,...
    687.506290143566, 682.221903966472, 677.158649070937, 672.289695365227, 667.592817709192, 663.049398878993, 658.643688571568,...
    654.362243386917, 650.193497207822, 646.127427157628, 642.155290703344, 638.269416461255, 634.463036056212, 630.730147730655,...
    627.065404770125, 623.464023516509, 619.921706982087, 616.434580993235, 612.999140475608, 609.612204007396, 606.270875158954,...
    602.972509437924, 599.714685891975, 596.49518260314, 593.311955450832, 590.163119633898, 587.046933532463, 583.961784562784,...
    580.906176736867, 577.87871968609, 574.878118946828, 571.903167337885, 568.95273728569, 566.025773974952, 563.121289220462,...
    560.238355970816, 557.376103367429, 554.533712292863, 551.710411351441, 548.905473232728, 546.11821141494, 543.34797717085,...
    540.594156843467, 537.856169362853, 535.133463978906, 532.42551818794, 529.73183583354, 527.051945364387, 524.385398233744,...
    521.731767427001, 519.090646105173, 516.461646353575, 513.844398026017, 511.238547675924, 508.64375756663, 506.059704753935,...
    503.486080234656, 500.922588155586, 498.368945077763, 495.824879291497, 493.290130177985, 490.764447613786, 488.247591414732,...
    485.739330816189, 483.239443986854, 480.747717573519, 478.263946274475, 475.787932439409, 473.319485693852, 470.858422586388,...
    468.404566256991, 465.957746124988, 463.517797595269, 461.084561781486, 458.657885245064, 456.237619748958, 453.823622025177,...
    451.415753555138, 449.013880362037, 446.617872814437, 444.227605440355, 441.842956751201, 439.463809074921, 437.090048397792,...
    434.721564214331, 432.358249384821, 430];
Power = [0, 2.35953316064478, 4.51595524847502, 6.58923218514827, 8.6048640612784, 10.5749617172665, 12.5066582817252,...
    14.4046670871118, 16.2723380910432, 18.1121760547034, 19.9261251700345, 21.7157385906517, 23.4822857759245,...
    25.226823797401, 26.9502465736278, 28.6533199665918, 30.336707478378, 32.0009894993848, 33.6466780125433,...
    35.2742280203625, 36.8840465600078, 38.4764999111507, 40.0519194280018, 41.6106063089512, 43.1528355352647,...
    44.6788591522879, 46.1889090248922, 47.6831991684375, 49.1619277339778, 50.6252787095405, 52.0734233864953,...
    53.5065216302128, 54.9247229866145, 56.3281676502834, 57.7169873151324, 59.0913059249165, 60.451240337911,...
    61.7969009176853, 63.1283920599685, 64.4458126640216, 65.7492565556358, 67.0388128678076, 68.3145663842556,...
    69.5765978502052, 70.8249842542492, 72.0597990845735, 73.2811125623969, 74.4889918551036, 75.6835012712301,...
    76.8647024391959, 78.0326544714401, 79.1874141154209, 80.3290358927698, 81.4575722277368, 82.573073565939,...
    83.6755884843109, 84.7651637930556, 85.8418446303114, 86.9056745501743, 87.9566956046477, 88.9949484200348,...
    90.0204722682374, 91.033305133378, 92.0334837741229, 93.021043782047, 93.9960196363507, 94.958444755208,...
    95.9083515440033, 96.8457714406864, 97.7707349584603, 98.6832717259927, 99.5834105253305, 100.471179327677,...
    101.346605327182, 102.209714972878, 103.060533998895, 103.899087453055, 104.72539972397, 105.539494566729,...
    106.341395127262, 107.131123965482, 107.908703077258, 108.674153915308, 109.427497409077, 110.168753983644,...
    110.897943577747, 111.615085660941, 112.32019924997, 113.013302924384, 113.69441484144, 114.363552750344,...
    115.020734005849, 115.665975581261, 116.299294080879, 116.920705751901, 117.53022649582, 118.127871879339,...
    118.71365714484, 119.287597220412, 119.849706729472, 120.4];
I = [0, 2.8, 5.6, 8.4, 11.2, 14, 16.8, 19.6, 22.4, 25.2, 28, 30.8, 33.6, 36.4, 39.2, 42, 44.8, 47.6, 50.4, 53.2, 56, 58.8,...
    61.6, 64.4, 67.2, 70, 72.8, 75.6, 78.4, 81.2, 84, 86.8, 89.6, 92.4, 95.2, 98, 100.8, 103.6, 106.4, 109.2, 112, 114.8,...
    117.6, 120.4, 123.2, 126, 128.8, 131.6, 134.4, 137.2, 140, 142.8, 145.6, 148.4, 151.2, 154, 156.8, 159.6, 162.4, 165.2,...
    168, 170.8, 173.6, 176.4, 179.2, 182, 184.8, 187.6, 190.4, 193.2, 196, 198.8, 201.6, 204.4, 207.2, 210, 212.8, 215.6,...
    218.4, 221.2, 224, 226.8, 229.6, 232.4, 235.2, 238, 240.8, 243.6, 246.4, 249.2, 252, 254.8, 257.6, 260.4, 263.2, 266,...
    268.8, 271.6, 274.4, 277.2, 280];

H2flow_gram=N*M/2/98487*excess_lambda*current_desired; % mass flow rate (gram/sec)
H2flow = H2flow_gram*60*8.314*10^3*273.15/101325/2; % H2 flow rate in standard LPM
V_out = interp1(I,V,current_desired); % Volts
P_out = interp1(I,Power,current_desired); % KiloWatts
out = [current_desired,V_out,P_out,H2flow];
val=out;